<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="_fragments/header :: head">
    <title>μ‚¬μ©μ μƒμ„Έ - CLD4 Archive</title>
  </head>
  <body class="d-flex flex-column min-vh-100">
    <div th:replace="_fragments/header :: header"></div>

    <main class="container mt-4 flex-grow-1">
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
          <div class="card">
            <div class="card-header bg-white border-bottom">
              <h1 class="h4 mb-0">
                <i class="bi bi-person-lines-fill"></i> μ‚¬μ©μ μƒμ„Έ
              </h1>
            </div>
            <div class="card-body">
              <div class="row mb-3">
                <div class="col-4">
                  <strong class="text-muted">
                    <i class="bi bi-hash"></i> ID
                  </strong>
                </div>
                <div class="col-8">
                  <span class="badge bg-secondary fs-6" th:text="${user.id}"
                    >1</span
                  >
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-4">
                  <strong class="text-muted">
                    <i class="bi bi-person"></i> μ΄λ¦„
                  </strong>
                </div>
                <div class="col-8">
                  <span th:text="${user.name}">ν™κΈΈλ™</span>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-4">
                  <strong class="text-muted">
                    <i class="bi bi-envelope"></i> μ΄λ©”μΌ
                  </strong>
                </div>
                <div class="col-8">
                  <a
                    th:href="'mailto:' + ${user.email}"
                    class="text-decoration-none"
                  >
                    <span th:text="${user.email}">email@example.com</span>
                  </a>
                </div>
              </div>

              <div class="row mb-3">
                <div class="col-4">
                  <strong class="text-muted">
                    <i class="bi bi-shield-check"></i> μ—­ν• 
                  </strong>
                </div>
                <div class="col-8">
                  <span th:switch="${user.role.name()}" class="badge fs-6">
                    <span th:case="'ADMIN'" class="badge badge-outline"
                      >π‘‘ κ΄€λ¦¬μ</span
                    >
                    <span th:case="'TEACHER'" class="badge badge-outline"
                      >π‘¨β€π« κ°•μ‚¬</span
                    >
                    <span th:case="'STUDENT'" class="badge badge-outline"
                      >π‘¨β€π“ ν•™μƒ</span
                    >
                    <span
                      th:case="*"
                      class="badge badge-outline"
                      th:text="${user.role}"
                      >μ—­ν• </span
                    >
                  </span>
                </div>
              </div>

              <div class="row mb-4" th:if="${user.createdAt != null}">
                <div class="col-4">
                  <strong class="text-muted">
                    <i class="bi bi-calendar-check"></i> κ°€μ…μΌ
                  </strong>
                </div>
                <div class="col-8">
                  <span
                    class="text-muted"
                    th:text="${#temporals.format(user.createdAt, 'yyyyλ…„ MMμ›” ddμΌ HH:mm')}"
                    >2025λ…„ 01μ›” 01μΌ 12:00</span
                  >
                </div>
              </div>

              <div class="row mb-4">
                <div class="col-4">
                  <strong class="text-muted">
                    <i class="bi bi-patch-check"></i> μΉμΈ μƒνƒ
                  </strong>
                </div>
                <div class="col-8">
                  <span
                    th:if="${user.role.name() == 'ADMIN'}"
                    class="badge bg-secondary"
                    >-</span
                  >
                  <span th:if="${user.role.name() != 'ADMIN'}">
                    <span th:if="${user.approved}" class="badge bg-primary"
                      >μΉμΈλ¨</span
                    >
                    <span
                      th:unless="${user.approved}"
                      class="badge bg-secondary"
                      >λ€κΈ°</span
                    >
                    <small
                      class="text-muted ms-2"
                      th:if="${user.approvedAt != null}"
                    >
                      <i class="bi bi-clock"></i>
                      <span
                        th:text="${#temporals.format(user.approvedAt, 'yyyy-MM-dd HH:mm')}"
                        >-</span
                      >
                    </small>
                  </span>
                </div>
              </div>

              <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <a th:href="@{/users}" class="btn btn-outline-primary me-md-2">
                  <i class="bi bi-arrow-left"></i> λ©λ΅μΌλ΅
                </a>
                <form
                  th:action="@{'/users/approve/' + ${user.id}}"
                  method="post"
                  th:if="${user.role.name() != 'ADMIN' and !user.approved}"
                  class="d-inline"
                >
                  <button
                    type="submit"
                    class="btn btn-primary"
                    onclick="return confirm('μΉμΈν•μ‹κ² μµλ‹κΉ?');"
                  >
                    <i class="bi bi-check2-circle"></i> μΉμΈ
                  </button>
                </form>
                <a
                  th:href="@{'/users/edit/' + ${user.id}}"
                  class="btn btn-primary"
                >
                  <i class="bi bi-pencil"></i> μμ •
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div th:replace="_fragments/footer :: footer"></div>
    <div th:replace="_fragments/header :: scripts"></div>
  </body>
</html>
